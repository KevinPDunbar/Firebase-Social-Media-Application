{"version":3,"sources":["../../../src/@ionic-native/plugins/media/index.ts"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CordovaInstance, Plugin, checkAvailability, IonicNativePlugin, InstanceProperty } from '@ionic-native/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\n/**\n * @hidden\n */\nexport class MediaObject {\n\n  /**\n   * An observable that notifies you on actions success\n   */\n  onSuccess: Observable<any>;\n\n  /**\n   * An observable that notifies you when an error occurs\n   */\n  onError: Observable<MEDIA_ERROR>;\n\n  /**\n   * An observable that notifies you when the file status changes\n   */\n  onStatusUpdate: Observable<MEDIA_STATUS>;\n\n  /**\n   * @hidden\n   */\n  @InstanceProperty\n  successCallback: Function;\n\n  /**\n   * @hidden\n   */\n  @InstanceProperty\n  errorCallback: Function;\n\n  /**\n   * @hidden\n   */\n  @InstanceProperty\n  statusCallback: Function;\n\n  constructor(private _objectInstance: any) {\n    this.onSuccess = new Observable<any>((observer: Observer<any>) => {\n      this.successCallback = observer.next.bind(observer);\n      return () => this.successCallback = () => {};\n    });\n\n    this.onError = new Observable<MEDIA_ERROR>((observer: Observer<MEDIA_ERROR>) => {\n      this.errorCallback = observer.next.bind(observer);\n      return () => this.errorCallback = () => {};\n    });\n\n    this.onStatusUpdate = new Observable<MEDIA_STATUS>((observer: Observer<MEDIA_STATUS>) => {\n      this.statusCallback = observer.next.bind(observer);\n      return () => this.statusCallback = () => {};\n    });\n  }\n\n  /**\n   * Get the current amplitude of the current recording.\n   * @returns {Promise<any>} Returns a promise with the amplitude of the current recording\n   */\n  @CordovaInstance()\n  getCurrentAmplitude(): Promise<any> { return; }\n\n  /**\n   * Get the current position within an audio file. Also updates the Media object's position parameter.\n   * @returns {Promise<any>} Returns a promise with the position of the current recording\n   */\n  @CordovaInstance()\n  getCurrentPosition(): Promise<any> { return; }\n\n  /**\n   * Get the duration of an audio file in seconds. If the duration is unknown, it returns a value of -1.\n   * @returns {number} Returns a promise with the duration of the current recording\n   */\n  @CordovaInstance({ sync: true })\n  getDuration(): number { return; }\n\n  /**\n   * Starts or resumes playing an audio file.\n   */\n  @CordovaInstance({ sync: true })\n  play(iosOptions?: {\n    numberOfLoops?: number,\n    playAudioWhenScreenIsLocked?: boolean\n  }): void { }\n\n  /**\n   * Pauses playing an audio file.\n   */\n  @CordovaInstance({ sync: true })\n  pause(): void { }\n\n  /**\n   * Releases the underlying operating system's audio resources. This is particularly important for Android, since there are a finite amount of OpenCore instances for media playback. Applications should call the release function for any Media resource that is no longer needed.\n   */\n  @CordovaInstance({ sync: true })\n  release(): void { }\n\n  /**\n   * Sets the current position within an audio file.\n   * @param {number} milliseconds The time position you want to set for the current audio file\n   */\n  @CordovaInstance({ sync: true })\n  seekTo(milliseconds: number): void { }\n\n  /**\n   * Set the volume for an audio file.\n   * @param volume {number} The volume to set for playback. The value must be within the range of 0.0 to 1.0.\n   */\n  @CordovaInstance({ sync: true })\n  setVolume(volume: number): void { }\n\n  @CordovaInstance({ sync: true })\n  setRate(speedRate: number): void {}\n\n  /**\n   * Starts recording an audio file.\n   */\n  @CordovaInstance({ sync: true })\n  startRecord(): void { }\n\n  /**\n   * Stops recording\n   */\n  @CordovaInstance({ sync: true })\n  stopRecord(): void { }\n\n  /**\n   * Pauses recording\n   */\n  @CordovaInstance({ sync: true })\n  pauseRecord(): void { }\n\n  /**\n   * Resumes recording\n   */\n  @CordovaInstance({ sync: true })\n  resumeRecord(): void { }\n\n  /**\n   * Stops playing an audio file.\n   */\n  @CordovaInstance({ sync: true })\n  stop(): void { }\n\n}\n\nexport type MediaStatusUpdateCallback = (statusCode: number) => void;\n\nexport interface MediaError {\n\n  /**\n   * Error message\n   */\n  message: string;\n\n  /**\n   * Error code\n   */\n  code: number;\n\n}\n\nexport enum MEDIA_STATUS {\n  NONE = 0,\n  STARTING,\n  RUNNING,\n  PAUSED,\n  STOPPED\n}\n\nexport enum MEDIA_ERROR {\n  ABORTED = 1,\n  NETWORK,\n  DECODE,\n  SUPPORTED\n}\n\nexport type MediaErrorCallback = (error: MediaError) => void;\n\n/**\n * @name Media\n * @description\n * This plugin provides the ability to record and play back audio files on a device.\n *\n * @usage\n * ```typescript\n * import { Media, MediaObject } from '@ionic-native/media';\n *\n *\n * constructor(private media: Media) { }\n *\n *\n * ...\n *\n *\n * // Create a Media instance.  Expects path to file or url as argument\n * // We can optionally pass a second argument to track the status of the media\n *\n * const file: MediaObject = this.media.create('file.mp3');\n *\n * // to listen to plugin events:\n *\n * file.onStatusUpdate.subscribe(status => console.log(status)); // fires when file status changes\n *\n * file.onSuccess.subscribe(() => console.log('Action is successful'));\n *\n * file.onError.subscribe(error => console.log('Error!', error));\n *\n * // play the file\n * file.play();\n *\n * // pause the file\n * file.pause();\n *\n * // get current playback position\n * file.getCurrentPosition().then((position) => {\n *   console.log(position);\n * });\n *\n * // get file duration\n * let duration = file.getDuration();\n * console.log(duration);\n *\n * // skip to 10 seconds (expects int value in ms)\n * file.seekTo(10000);\n *\n * // stop playing the file\n * file.stop();\n *\n * // release the native audio resource\n * // Platform Quirks:\n * // iOS simply create a new instance and the old one will be overwritten\n * // Android you must call release() to destroy instances of media when you are done\n * file.release();\n *\n *\n *\n * // Recording to a file\n * const file: MediaObject = this.media.create('path/to/file.mp3');\n *\n * file.startRecord();\n *\n * file.stopRecord();\n *\n *\n * ```\n *\n * Some hints if you are using iOS and recording doesn't work:\n * 1.) Try to use a absolute file path but remove beginning \"file://\".\n * Then it looks like: `/var/mobile/Containers/Data/Application/AF438B8B-7724-4FBB-8E69-083463224FC4/tmp/my_file.m4a`\n * Example: `this.media.create(this.file.tempDirectory.replace(/^file:\\/\\//, '') + 'my_file.m4a')`\n * 2.) If that's not working, too, create the file before using.\n * Example:\n * ```typescript\n * import { Media, MediaObject } from '@ionic-native/media';\n * import { File } from '@ionic-native/file';\n *\n * ...\n *\n * constructor(private media: Media, private file: File) { }\n *\n * ...\n *\n * this.file.createFile(this.file.tempDirectory, 'my_file.m4a', true).then(() => {\n *   let file = this.media.create(this.file.tempDirectory.replace(/^file:\\/\\//, '') + 'my_file.m4a');\n *   file.startRecord();\n *   window.setTimeout(() => file.stopRecord(), 10000);\n * });\n * ```\n *\n * You can find the reasons here: https://github.com/ionic-team/ionic-native/issues/1452#issuecomment-299605906\n * @classes\n * MediaObject\n * @interfaces\n * MediaError\n */\n@Plugin({\n  pluginName: 'Media',\n  repo: 'https://github.com/apache/cordova-plugin-media',\n  plugin: 'cordova-plugin-media',\n  pluginRef: 'Media',\n  platforms: ['Android', 'Browser', 'iOS', 'Windows']\n})\n\nexport class Media extends IonicNativePlugin {\n\n  // Constants\n  /**\n   * @hidden\n   */\n  MEDIA_NONE: number = 0;\n  /**\n   * @hidden\n   */\n  MEDIA_STARTING: number = 1;\n  /**\n   * @hidden\n   */\n  MEDIA_RUNNING: number = 2;\n  /**\n   * @hidden\n   */\n  MEDIA_PAUSED: number = 3;\n  /**\n   * @hidden\n   */\n  MEDIA_STOPPED: number = 4;\n\n  // error codes\n  /**\n   * @hidden\n   */\n  MEDIA_ERR_ABORTED: number = 1;\n  /**\n   * @hidden\n   */\n  MEDIA_ERR_NETWORK: number = 2;\n  /**\n   * @hidden\n   */\n  MEDIA_ERR_DECODE: number = 3;\n  /**\n   * @hidden\n   */\n  MEDIA_ERR_NONE_SUPPORTED: number = 4;\n\n  /**\n   * Open a media file\n   * @param src {string} A URI containing the audio content.\n   * @return {MediaObject}\n   */\n  create(src: string): MediaObject {\n    let instance: any;\n\n    if (checkAvailability(Media.getPluginRef(), null, Media.getPluginName()) === true) {\n      // Creates a new media object\n      instance = new (Media.getPlugin())(src);\n    }\n\n    return new MediaObject(instance);\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}